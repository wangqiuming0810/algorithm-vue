(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30c18a30"],{"1dc2":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-container",{ref:"appCon",attrs:{"config-obj":t.config,cursor:t.cursor_},on:{cursor:function(e){t.cursor=e},"break-fn":function(e){t.isBreak=e},change:t.change,edit:function(e){return t.$emit("edit",e)},add:function(e){return t.$emit("add",e)}},scopedSlots:t._u([{key:"animation",fn:function(){return[n("stage",{ref:"stage"})]},proxy:!0},{key:"button-group",fn:function(){return[t._t("button-group")]},proxy:!0},{key:"change-dialog-div",fn:function(){return[t._t("change",(function(){return[t._v(" 你需要设置数据更改... ")]}))]},proxy:!0},{key:"add-dialog-div",fn:function(){return[t._t("add",(function(){return[t._v(" 你需要设置数据添加... ")]}))]},proxy:!0}],null,!0)})},r=[],a=n("5530"),o=(n("d81d"),n("cd4a")),c=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"stage"},[n("canvas",{attrs:{id:"canvas"}})])}],u=n("7a94"),f=n("ed08"),h={data:function(){return{canvas:{}}},mounted:function(){var t=this;this.canvas=new u["fabric"].StaticCanvas("canvas"),window.onresize=this.resizeCanvas.bind(this),setTimeout((function(){t.resizeCanvas()}))},methods:{resizeCanvas:function(){this.canvas.setWidth(Object(f["d"])(".stage","width")),this.canvas.setHeight(Object(f["d"])(".stage","height")),this.zoomToFitCanvas()},zoomToFitCanvas:function(){this.canvas.setZoom(1),this.canvas.absolutePan({x:0,y:0});var t,e,n,i,r,a=this.canvas.getObjects();if(a.length>0){t=a[0].getBoundingRect(),e=t.left,n=t.top,i=t.left+t.width,r=t.top+t.height;for(var o=1;o<a.length;o++)t=a[o].getBoundingRect(),e=Math.min(e,t.left),n=Math.min(n,t.top),i=Math.max(i,t.left+t.width),r=Math.max(r,t.top+t.height)}var c=(i-e-this.canvas.width)/2+e,s=(r-n-this.canvas.height)/2+n;this.canvas.absolutePan({x:c,y:s});var f=Math.min(this.canvas.width/(i-e),this.canvas.height/(r-n)),h=new u["fabric"].Point(this.canvas.width/2,this.canvas.height/2);this.canvas.zoomToPoint(h,f)}}},l=h,d=(n("817d"),n("2877")),b=Object(d["a"])(l,c,s,!1,null,null,null),p=b.exports,v=n("2f62"),g=n("6f73"),y={components:{AppContainer:o["a"],Stage:p},props:{config:{type:Object,default:function(){return{option:{mode:"text/x-java",readOnly:!0},title:["更改数组","输入数据"],levelList:[{name:"xxx"},{name:"yyy"}],display:{add:!1,edit:!1},codeDataList:["没有代码...","没有代码...","没有代码..."]}}},animation:{type:Function,default:function(){return g["b"]}},data:{type:Object,default:function(){}}},data:function(){return{cursor:1,cursor_:1,isPlay:!1,speed:0,isBreak:function(t){},stage:{}}},computed:Object(a["a"])({},Object(v["d"])("animation",["animState","preState","map"])),watch:{animState:function(t){var e=this.map,n=e.START,i=e.FINISH,r=e.CODE,a=e.ANIM,o=e.PEND;switch(t){case n:this.init();break;case r:this.doCode();break;case a:this.doAnim();break;case o:this.doContiune();break;case i:this.stage.clear();break}},data:function(){this.recovery()}},mounted:function(){this.stage=this.$refs.stage.canvas,this.stage.selection=!1,this.init()},methods:Object(a["a"])(Object(a["a"])({},Object(v["b"])("animation",["playAnim","startAnim","startCode","continue","endAll","hashBreak"])),{},{change:function(t){this.anim.changeState(t),this.isPlay=t.isPlay,this.speed=t.speed},clearBreakPoint:function(){this.$refs.appCon.clearBreakPoint()},recovery:function(){this.endAll(),this.stage.clear(),this.init()},setCursor:function(t){this.cursor_=t},doAnim:function(){this.anim.doAnim()},doCode:function(){var t=this;setTimeout((function(){!t.isBreak(t.cursor)&&t.isPlay&&t.anim.doCode()}),this.speed)},doContiune:function(){var t=this;setTimeout((function(){t.continue()}),this.speed)},init:function(){var t=this.animation;this.anim=new t,this.anim.init({stage:this.stage,anim:{animState:this.animState,map:this.map},data:this.data,setCursor:this.setCursor.bind(this),startAnim:this.startAnim.bind(this),startCode:this.startCode.bind(this),endAll:this.endAll.bind(this)}),this.$refs.stage.resizeCanvas()}})},m=y,w=Object(d["a"])(m,i,r,!1,null,null,null);e["a"]=w.exports},2577:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return c})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return u}));var i=n("d4ec"),r=n("bee2"),a=n("ade3"),o=function(){function t(){Object(i["a"])(this,t),Object(a["a"])(this,"mutations",{})}return Object(r["a"])(t,[{key:"init",value:function(){throw new Error("missing init method")}},{key:"doAnim",value:function(t){var e=this,n=t.type,i=t.payload,r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.mutations[n].call(e,i,t)};return r.then=function(t){return r().then(t)},r}}]),t}();function c(t){return function(e){return function(n){return!!t()||e(n)}}}function s(t,e,n){var i=!1;return function(r,a){return function(o){return function(c){return c===a?r:c===r?(i?n():(t(),i=!0),e()?r+1:(i=!1,a+1)):o(c)}}}}function u(t){return function(e,n){return function(i){return function(r){return r===e?t()?e+1:n:i(r)}}}}},"257e":function(t,e,n){"use strict";function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",(function(){return i}))},"262e":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("b380");function r(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Object(i["a"])(t,e)}},"2caf":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));n("4ae1"),n("d3b7"),n("f8c9"),n("3410");function i(t){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},i(t)}var r=n("d967"),a=n("7037"),o=n.n(a),c=n("257e");function s(t,e){if(e&&("object"===o()(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Object(c["a"])(t)}function u(t){var e=Object(r["a"])();return function(){var n,r=i(t);if(e){var a=i(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return s(this,n)}}},3410:function(t,e,n){var i=n("23e7"),r=n("d039"),a=n("7b0b"),o=n("e163"),c=n("e177"),s=r((function(){o(1)}));i({target:"Object",stat:!0,forced:s,sham:!c},{getPrototypeOf:function(t){return o(a(t))}})},"4fadc":function(t,e,n){var i=n("23e7"),r=n("6f53").entries;i({target:"Object",stat:!0},{entries:function(t){return r(t)}})},"6f53":function(t,e,n){var i=n("83ab"),r=n("e330"),a=n("df75"),o=n("fc6a"),c=n("d1e7").f,s=r(c),u=r([].push),f=function(t){return function(e){var n,r=o(e),c=a(r),f=c.length,h=0,l=[];while(f>h)n=c[h++],i&&!s(r,n)||u(l,t?[n,r[n]]:r[n]);return l}};t.exports={entries:f(!0),values:f(!1)}},"6f73":function(t,e,n){"use strict";n.d(e,"a",(function(){return j}));var i=n("5530");n("a4d3"),n("b64b");function r(t,e){if(null==t)return{};var n,i,r={},a=Object.keys(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}function a(t,e){if(null==t)return{};var n,i,a=r(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var o=n("d4ec"),c=n("bee2"),s=n("ade3"),u=(n("4fadc"),n("257e")),f=n("262e"),h=n("2caf"),l=n("3835"),d=(n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("7a94")),b=(n("cb29"),function(){function t(e){Object(o["a"])(this,t),this.init(e)}return Object(c["a"])(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{color:"green",text:"hello",width:20,height:100,x:0,y:0},e=t.color,n=t.text,i=t.width,r=t.height,a=t.x,o=t.y;this.data=t;var c=new d["fabric"].Rect({width:i,height:r,fill:e,originX:"center",originY:"center"}),s=new d["fabric"].Text(n,{fontSize:12,left:0,top:-r/2,originX:"center",originY:"bottom"});this.ref=new d["fabric"].Group([c,s],{top:o,left:a,originX:"center",originY:"bottom"}),Object.defineProperties(this.ref,{fill:{get:function(){return c.fill},set:function(t){c.fill=t}}})}}]),t}()),p=b,v=n("2577");function g(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r,a){t.animate(e,Object(i["a"])(Object(i["a"])({},n),{},{onComplete:function(){r()}}))}))}}n("a9e3");function y(t){return t.reduce((function(t,e){return t[0]=e.value>t[0]?e.value:t[0],t[1]=e.value<t[1]?e.value:t[1],t}),[Number.MIN_VALUE,Number.MAX_VALUE])}var m=function(t){var e="";switch(t){case-1:e="red";break;case 0:e="#ccc";break;case 1:e="yellow";break;default:e="green";break}return e},w={EXCHANGE_ITEM:function(t,e){var n=Object(l["a"])(t,2),i=n[0],r=n[1],a=this.ref.item(i.index),o=this.ref.item(r.index),c=g(a)({left:o.left,fill:m(i.status)},e),s=g(o)({left:a.left,fill:m(r.status)},e),u=this.ref._objects,f=[u[r.index],u[i.index]];return u[i.index]=f[0],u[r.index]=f[1],Promise.all([c,s])},CHENGE_ITEM:function(t,e){var n=this,i=t.map((function(t){var i=t.index,r=t.status;return g(n.ref.item(i))({fill:m(r)},e)}));return Promise.all(i)}},O={exchange:function(t){return{type:"EXCHANGE_ITEM",payload:t}},change:function(t){return{type:"CHENGE_ITEM",payload:t}}},x=function(t){Object(f["a"])(n,t);var e=Object(h["a"])(n);function n(t,i){var r;return Object(o["a"])(this,n),r=e.call(this),Object(s["a"])(Object(u["a"])(r),"mutations",w),r.option=i,r.init(t),r}return Object(c["a"])(n,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.option,n=y(t),i=Object(l["a"])(n,2),r=i[0],a=i[1];this.itemArr=t.map((function(t,e){return new p({color:m(t.status),text:t.value+"",width:20,height:(t.value-a+10)/(r-a)*100,x:30*e,y:0})})),this.ref=new d["fabric"].Group(this.itemArr.map((function(t){return t.ref})),e)}}]),n}(v["a"]);Object(s["a"])(x,"action",O);var j=x,k=n("2909"),C=(n("99af"),{Line2:{width:5}}),A=function(){function t(e){Object(o["a"])(this,t),this.init(e)}return Object(c["a"])(t,[{key:"set",value:function(t){var e=t.x,n=t.y,i=t.text,r=t.color,a=void 0===r?"red":r;this.ref.set({x:e,y:n});var o=this.ref.item(0),c=this.ref.item(2);o.set({fill:a}),c.set({text:i})}},{key:"init",value:function(t){var e=t.width,n=t.height,i=t.color,r=t.text,a=t.x,o=t.y;this.data=t;var c=new d["fabric"].Rect({width:e,height:n,fill:i,originX:"center",originY:"center"}),s=new d["fabric"].Rect({width:C.Line2.width,height:n,left:(e+C.Line2.width)/2,top:0,fill:"gray",originX:"center",originY:"center"}),u=new d["fabric"].Text(r,{fontSize:10,left:0,top:0,originX:"center",originY:"center"}),f=new d["fabric"].Text("^",{fontSize:10,left:(e+C.Line2.width)/2,top:0,originX:"center",originY:"center"});this.ref=new d["fabric"].Group([c,s,u,f],{top:o,left:a,originX:"center",originY:"center"})}}]),t}();Object(s["a"])(A,"CONFIG",C);var _=A,E=(n("fb6a"),n("019f"),function(){function t(e){Object(o["a"])(this,t),this.init(e)}return Object(c["a"])(t,[{key:"computeArrowLocation",value:function(t){var e=t.slice(-2),n=Object(l["a"])(e,2),i=n[0],r=n[1],a=r.y-i.y,o=r.x-i.x,c=Math.atan2(a,o)/Math.PI*180+90;return{top:r.y,left:r.x,angle:c}}},{key:"init",value:function(t){var e=t.x,n=t.y,r=t.points,a=void 0===r?[]:r,o=t.op;if(console.log(o,8),!(a.length<2)){var c=new d["fabric"].Polyline(a,{stroke:"black",fill:"transparent",objectCaching:!1,strokeWidth:.5}),s=this.computeArrowLocation(a),u=new d["fabric"].Triangle(Object(i["a"])(Object(i["a"])({},s),{},{fill:"black",objectCaching:!1,width:2,height:3,originX:"center",originY:"center"}));this.ref=new d["fabric"].Group([c,u],{y:n,x:e,originX:"center",originY:"center"})}}},{key:"setPoints",value:function(t){var e=this.computeArrowLocation(t),n=this.ref.item(0),i=this.ref.item(1);n.set({points:t}),i.set({angle:e.angle,left:e.left-this.ref.left,top:e.top-this.ref.top})}}]),t}()),S=E,P={},T={},M={rowLength:5,xSpace:40,ySpace:30,width:20,height:10},N=function(t){Object(f["a"])(n,t);var e=Object(h["a"])(n);function n(t,i){var r;return Object(o["a"])(this,n),r=e.call(this),Object(s["a"])(Object(u["a"])(r),"mutations",P),r.option=i,r.init(t),r}return Object(c["a"])(n,[{key:"setTarget",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"target",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"red",r=M.width,a=M.height,o=_.CONFIG.Line2.width,c=r+o+M.xSpace;this.targetNode.set({color:i,text:n,x:t*c+o/2+c/2,y:5*-a/4+e*a*4})}},{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.option;this.arrowArr=[];var i=null,r=M.width,a=M.height,o=M.rowLength,c=_.CONFIG.Line2.width,s=r+c+M.xSpace,u=a+M.ySpace,f={color:"green",text:"Top"},h=new _({color:"red",text:"B",width:r,height:a,x:3*s+c/4+s/2,y:5*-a/4+0*a*4});this.topNode=f,this.targetNode=h,e.unshift(f),this.itemArr=e.map((function(e,f){var h=e.color,l=void 0===h?"red":h,d=e.text,b=void 0===d?"A":d,p=f%o,v=f/o|0,g=new _({color:l,text:b,width:r,height:a,x:p*s,y:v*u});if(i){var y={x:i.data.x+r/2,y:i.data.y},m=[];f%o===0?m.push(y,{x:y.x+2*c,y:y.y},{x:y.x+2*c,y:y.y+u/2},{x:-r-c/2,y:y.y+u/2},{x:-r-c/2,y:y.y+u},{x:p*s-(r+c)/2,y:v*u}):m.push(y,{x:p*s-(r+c)/2,y:v*u}),t.arrowArr.push(new S({x:y.x,y:y.y,points:m,op:n.op}))}return i=g,g})),this.itemArr.push(h),this.ref=new fabric.Group([].concat(Object(k["a"])(this.itemArr.map((function(t){return t.ref}))),Object(k["a"])(this.arrowArr.map((function(t){return t.ref})))),n),this.setTarget(0,1,"C","yellow")}}]),n}(v["a"]);Object(s["a"])(N,"action",T),Object(s["a"])(N,"CONFIG",M);var L=n("ed08"),I=["stage","anim","setCursor","data"],G=function(){function t(){Object(o["a"])(this,t),Object(s["a"])(this,"comp",X.REF),Object(s["a"])(this,"data",{})}return Object(c["a"])(t,[{key:"$",get:function(){return this.data},set:function(t){this.data=t}},{key:"init",value:function(t){var e=t.stage,n=t.anim,r=t.setCursor,o=t.data,c=a(t,I);this.stage=e,this.setCursor=r,this.action=c,this.anim=n,this.data=Object(i["a"])(Object(i["a"])({},this.data),Object(L["b"])(o)),Object.entries(X),this.created&&this.created()}},{key:"changeState",value:function(t){console.log(t,50),this.state=t}},{key:"doAnim",value:function(){throw new Error("missing doAnim method")}},{key:"doCode",value:function(){throw new Error("missing doCode method")}}],[{key:"setRef",value:function(t){X.REF=t}}]),t}();Object(s["a"])(G,"REF",null);var X=G;e["b"]=G},7037:function(t,e,n){function i(e){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?(t.exports=i=function(t){return typeof t},t.exports["default"]=t.exports,t.exports.__esModule=!0):(t.exports=i=function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports["default"]=t.exports,t.exports.__esModule=!0),i(e)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),t.exports=i,t.exports["default"]=t.exports,t.exports.__esModule=!0},"7ed4":function(t,e,n){},"817d":function(t,e,n){"use strict";n("7ed4")}}]);